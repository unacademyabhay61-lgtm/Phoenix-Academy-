<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoenix Academy | Planner</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b0c0e; --card: #1c1f26; --primary: #3db2ff; --text-dim: #888; }
        body { background: var(--bg); color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; padding-bottom: 90px; }
        
        .header { background: #1c1f26; padding: 18px; border-bottom: 1px solid #2a2d32; position: sticky; top: 0; z-index: 1000; text-align: center; }
        .header h3 { margin: 0; font-size: 18px; font-weight: 800; }

        .class-selector { display: flex; gap: 10px; overflow-x: auto; padding: 15px 20px; background: var(--bg); scrollbar-width: none; }
        .class-selector::-webkit-scrollbar { display: none; }
        
        .class-chip { background: #1c1f26; color: var(--text-dim); padding: 10px 22px; border-radius: 25px; font-size: 13px; font-weight: 700; cursor: pointer; white-space: nowrap; border: 1px solid #2a2d32; transition: 0.3s; }
        .class-chip.active { background: var(--primary); color: #fff; border-color: var(--primary); box-shadow: 0 4px 15px rgba(61, 178, 255, 0.3); }

        .timeline { padding: 10px 20px; }
        .card { background: var(--card); border-radius: 20px; padding: 18px; margin-bottom: 15px; border: 1px solid #2a2d32; display: flex; align-items: center; position: relative; }
        
        .time-box { min-width: 65px; border-right: 1px solid #333; margin-right: 18px; text-align: right; padding-right: 15px; }
        .time-val { color: var(--primary); font-weight: 800; font-size: 15px; display: block; }
        .time-ampm { font-size: 10px; color: #555; text-transform: uppercase; font-weight: 700; }

        .info-box { flex: 1; }
        .mode-tag { font-size: 9px; background: rgba(61, 178, 255, 0.1); color: var(--primary); padding: 3px 8px; border-radius: 5px; font-weight: 800; text-transform: uppercase; margin-bottom: 6px; display: inline-block; }
        .class-title { font-size: 16px; font-weight: 700; margin: 4px 0; color: #fff; line-height: 1.3; }
        
        /* Teacher Photo Styling */
        .teacher-info { display: flex; align-items: center; margin-top: 10px; }
        .sir-img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--primary); object-fit: cover; margin-right: 10px; }
        .teacher-name { font-size: 13px; color: var(--text-dim); font-weight: 600; }

        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #16181c; display: flex; justify-content: space-around; padding: 14px 0; border-top: 1px solid #222; }
        .nav-item { color: #555; text-decoration: none; font-size: 11px; font-weight: 700; text-align: center; }
        .nav-item.active { color: #fff; }
    </style>
</head>
<body>

    <div class="header"><h3>Planner Schedule</h3></div>

    <div class="class-selector">
        <div class="class-chip active" onclick="selectClass(this, '12th')">Class 12th</div>
        <div class="class-chip" onclick="selectClass(this, '11th')">Class 11th</div>
        <div class="class-chip" onclick="selectClass(this, '10th')">Class 10th</div>
        <div class="class-chip" onclick="selectClass(this, '9th')">Class 9th</div>
        <div class="class-chip" onclick="selectClass(this, '8th')">Class 8th</div>
        <div class="class-chip" onclick="selectClass(this, '1st')">Class 1st</div>
    </div>

    <div id="loader" style="text-align:center; padding:50px; color:#444;">Syncing...</div>
    <div id="planner-list" class="timeline"></div>

    <nav class="nav-bar">
        <a href="dashboard.html" class="nav-item">üè†<br>Home</a>
        <a href="planner.html" class="nav-item active">üìÖ<br>Planner</a>
        <a href="profile.html" class="nav-item">üë§<br>Me</a>
    </nav>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyA7MHXGSN-ZIybG8sEZiP9kDAwIHRYCfT8",
            authDomain: "phnoenix-coaching.firebaseapp.com",
            projectId: "phnoenix-coaching",
            appId: "1:56032052098:web:43d562162215be0eb3459b"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Sir ki photo ka placeholder (Temporary Link - Aap isse Storage URL se badal sakte hain)
        const abhaySirPhoto = "https://i.ibb.co/vz31HNd/sir-photo.jpg"; 

        firebase.auth().onAuthStateChanged(user => { if (user) fetchData("12th"); });

        function selectClass(el, name) {
            document.querySelectorAll('.class-chip').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            fetchData(name);
        }

        function fetchData(batch) {
            const list = document.getElementById('planner-list');
            db.collection("classes").where("targetClass", "==", batch).onSnapshot(snap => {
                document.getElementById('loader').style.display = 'none';
                list.innerHTML = "";
                if (snap.empty) {
                    list.innerHTML = `<div style="text-align:center; padding:40px; color:#444;">No classes for ${batch}.</div>`;
                    return;
                }
                snap.forEach(doc => {
                    const d = doc.data();
                    list.innerHTML += `
                        <div class="card" onclick="window.open('${d.link}')">
                            <div class="time-box">
                                <span class="time-val">${d.time || '17:50'}</span>
                                <span class="time-ampm">IST</span>
                            </div>
                            <div class="info-box">
                                <span class="mode-tag">${d.mode || 'ONLINE'}</span>
                                <div class="class-title">${d.title || 'Live Class'}</div>
                                <div class="teacher-info">
                                    <img src="https://i.postimg.cc/85M2Rj6W/IMG-20260129-160530.jpg" class="sir-img">
                                    <span class="teacher-name">${d.teacher || 'Abhay Raghuvanshi'}</span>
                                </div>
                            </div>
                        </div>`;
                });
            });
        }
    </script>
</body>
</html>
